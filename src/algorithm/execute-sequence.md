# 浏览器执行顺序

## 五大线程
* GUI线程
* JS引擎线程
* 定时器线程
* 异步请求线程
* 事件触发线程

在浏览器中，存在多个不同的线程，它们协同工作以实现网页的加载、渲染和交互等功能。以下是主要的浏览器线程及其作用：

**一、GUI 渲染线程**

1. 职责
   - 负责页面的渲染，包括解析 HTML、构建 DOM 树、计算 CSS 样式、布局和绘制等操作。
   - 处理用户的交互操作，如鼠标点击、滚动等，并更新页面的显示。

2. 特点
   - 与 JavaScript 引擎线程互斥。这是因为 JavaScript 可以操作 DOM 和 CSSOM，如果两个线程同时操作，可能会导致页面显示不一致的问题。所以当 JavaScript 执行时，GUI 渲染线程会被挂起，直到 JavaScript 执行完成后才会继续进行渲染。

**二、JavaScript 引擎线程**

1. 职责
   - 负责解析和执行 JavaScript 代码。
   - 实现网页的动态交互效果，如响应事件处理程序、更新页面内容等。

2. 特点
   - 单线程执行。这意味着在同一时间只能执行一段 JavaScript 代码。如果代码执行时间过长，可能会导致页面卡顿，影响用户体验。

**三、事件触发线程**

1. 职责
   - 管理事件循环，将各种事件（如鼠标点击、键盘输入、网络请求完成等）放入事件队列中。
   - 当 JavaScript 引擎线程空闲时，从事件队列中取出事件并调用相应的事件处理程序。

2. 特点
   - 独立于 JavaScript 引擎线程和 GUI 渲染线程工作。
   - 确保事件能够及时得到处理，而不会阻塞页面的渲染和 JavaScript 的执行。

**四、定时器触发线程**

1. 职责
   - 管理定时器（如`setTimeout`和`setInterval`），在指定的时间间隔后触发相应的回调函数。

2. 特点
   - 与 JavaScript 引擎线程分开工作。当设置了一个定时器后，定时器触发线程会在后台计算时间，当到达指定时间时，将回调函数放入事件队列中，等待 JavaScript 引擎线程执行。

**五、异步 HTTP 请求线程**

1. 职责
   - 负责发送异步 HTTP 请求，并在请求完成后将响应数据放入事件队列中。

2. 特点
   - 独立于 JavaScript 引擎线程工作。这使得在发送 HTTP 请求时，JavaScript 引擎线程不会被阻塞，可以继续执行其他任务。当请求完成后，事件触发线程会将响应处理程序放入事件队列中，等待 JavaScript 引擎线程执行。

![sequence](/execute-sequence.png)